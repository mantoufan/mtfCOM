!function(){function c(){var a=document.createElement("div");return"undefined"!=typeof a.style["opacity"]}function d(a){a()}function e(){var b,a=Object.create(null);for(type in{Top:"",Left:""})b="Top"==type?"Y":"X","undefined"!=typeof window["page"+b+"Offset"]?a[type.toLowerCase()]=window["page"+b+"Offset"]:(b=document.documentElement.clientHeight?document.documentElement:document.body,a[type.toLowerCase()]=b["scroll"+type]);return a}function f(b){var d,c=document.body;return window.innerHeight?d=window.innerHeight:c.parentElement.clientHeight?d=c.parentElement.clientHeight:c&&c.clientHeight&&(d=c.clientHeight),d-(b||0)-a}function g(b){return document.documentElement.clientWidth-(b||0)-a}function h(a){this.create(a)}var k,j,l,m,a=16,b=!1,i=!1;d(function(){i=!0}),j=!0,l=[],window.mtfWeather=function(a,f){"play"===a?j=!0:"stop"===a?j=!1:i?(b=c(),k&&clearInterval(k),k=setInterval(function(){j&&l.length<f&&Math.random()<.1&&l.push(new h(a));for(var c=e().top,d=l.length-1;d>=0;d--)l[d]&&(l[d].top<c||l[d].top>c+l[d].maxTop||b&&l[d].el.style.opacity<.01?(l[d].remove(),l[d]=null,l.splice(d,1)):(l[d].move(),l[d].draw()))},60)):d(function(){mtfWeather(a,f)})},h.prototype={common:function(a){a.style.cssText="position:absolute;display:block;z-index:99999;width:"+a.size+"px;height:"+a.size+"px"},create:function(a){switch(a){case"雪":this.el=m.get("./mtf/mtfWeatherPic/snow"+Math.floor(5*Math.random())+".gif"),this.el.size=0|40*Math.random()+10,this.common(this.el),this.maxLeft=g(this.el.size),this.maxTop=f(this.el.size),this.left=Math.random()*this.maxLeft,this.top=e().top+1,this.angle=1.5,this.minAngle=1.35,this.maxAngle=1.65,this.angleDelta=.01,this.speed=2+Math.random();break;case"蝴蝶":this.el=m.get("./mtf/mtfWeatherPic/butterfly"+Math.floor(5*Math.random())+".gif"),this.el.size=0|10*Math.random()+8,this.common(this.el),this.maxLeft=g(this.el.size),this.maxTop=f(this.el.size),this.left=Math.random()*this.maxLeft,this.top=e().top+f()/Math.floor(1+3*Math.random()),this.angle=0,this.minAngle=0,this.maxAngle=2,this.angleDelta=.01,this.speed=2.5+Math.random();break;case"光":this.el=document.createElement("div"),this.el.size=0|parseInt(20*Math.random())+20,this.common(this.el),this.el.innerHTML="●",this.el.style.color="#f9f7bd",this.el.style.fontSize=this.el.size+"px",this.maxLeft=g(this.el.size),this.maxTop=99999999,this.left=Math.random()*this.maxLeft,this.top=e().top+f(1.25*this.el.size),this.angle=.5,this.minAngle=.35,this.maxAngle=.65,this.angleDelta=.01*Math.random(),this.speed=2+Math.random();break;case"雨":this.el=document.createElement("div"),this.el.size=12,this.common(this.el),this.el.innerHTML="|",this.el.style.color="#FFFFFF",this.el.style.fontSize=this.el.size+"px",this.maxLeft=g(this.el.size),this.maxTop=f(this.el.size),this.left=Math.random()*this.maxLeft,this.top=e().top+1,this.angle=1.5,this.minAngle=-.25,this.maxAngle=.25,this.angleDelta=.01*Math.random(),this.speed=5+Math.random();break;case"樱花":default:this.el=m.get("./mtf/mtfWeatherPic/sakura"+Math.floor(8*Math.random())+".gif"),this.el.size=0|8*Math.random()+10,this.common(this.el),this.maxLeft=g(this.el.size),this.maxTop=f(this.el.size),this.left=Math.random()*this.maxLeft,this.top=e().top+1,this.angle=1.5,this.minAngle=1.2,this.maxAngle=1.7,this.angleDelta=.01*Math.random(),this.speed=2+1.5*Math.random()}b&&(this.el.style.opacity=.5+.5*Math.random()),document.body.appendChild(this.el)},move:function(){(this.angle<this.minAngle||this.angle>this.maxAngle)&&(this.angleDelta=-this.angleDelta),this.angle+=this.angleDelta,this.left+=this.speed*Math.cos(this.angle*Math.PI),this.top-=this.speed*Math.sin(this.angle*Math.PI),this.left<0?this.left=this.maxLeft:this.left>this.maxLeft&&(this.left=0)},draw:function(){this.el.style.top=Math.round(this.top)+"px",this.el.style.left=Math.round(this.left)+"px",b&&(this.el.style.opacity-=.003)},remove:function(){document.body.removeChild(this.el),this.el=null}},m={h:Object.create(null),get:function(a){var b=this.h[a];return b||(b=document.createElement("img"),b.src=a,this.h[a]=b),b.cloneNode()}}}();